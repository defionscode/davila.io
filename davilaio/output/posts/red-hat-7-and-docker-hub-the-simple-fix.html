<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns#
article: http://ogp.me/ns/article#
" lang="en">
    <head>
    <meta charset="utf-8">
    <meta name="description" content="A quick explanation of a fix to RedHat's modifcation of docker's registry behavior">
    <meta name="viewport" content="width=device-width">
    <title>Red Hat 7 and Docker Hub; the simple fix | Davila.io Blog</title>

                <link href="../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">

                    <link rel="alternate" type="application/rss+xml" title="RSS (en)" href="../rss.xml">
                <link rel="alternate" type="application/rss+xml" title="RSS (es)" href="../es/rss.xml">

      <link rel="canonical" href="http://blog.davila.io/posts/red-hat-7-and-docker-hub-the-simple-fix.html">



    
        <!--[if lt IE 9]><script src="/assets/js/html5.js"></script><![endif]-->

    

    
    <meta name="author" content="Jonathan I. Davila">
        <meta property="og:site_name" content="Davila.io Blog">
    <meta property="og:title" content="Red Hat 7 and Docker Hub; the simple fix">
    <meta property="og:url" content="http://blog.davila.io/posts/red-hat-7-and-docker-hub-the-simple-fix.html">
    <meta property="og:description" content="A quick explanation of a fix to RedHat's modifcation of docker's registry behavior">
    <meta property="og:type" content="article">
    <meta property="article:published_time" content="2015-04-08T07:17:51-04:00">
           <meta property="article:tag" content="docker">
           <meta property="article:tag" content="opensource">
           <meta property="article:tag" content="redhat">
           <meta property="article:tag" content="rhel7">

    
    

	<link rel="apple-touch-icon" sizes="57x57" href="../apple-icon-57x57.png">
	<link rel="apple-touch-icon" sizes="60x60" href="../apple-icon-60x60.png">
	<link rel="apple-touch-icon" sizes="72x72" href="../apple-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="76x76" href="../apple-icon-76x76.png">
	<link rel="apple-touch-icon" sizes="114x114" href="../apple-icon-114x114.png">
	<link rel="apple-touch-icon" sizes="120x120" href="../apple-icon-120x120.png">
	<link rel="apple-touch-icon" sizes="144x144" href="../apple-icon-144x144.png">
	<link rel="apple-touch-icon" sizes="152x152" href="../apple-icon-152x152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="../apple-icon-180x180.png">
	<link rel="icon" type="image/png" sizes="192x192" href="../android-icon-192x192.png">
	<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
	<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
	<link rel="manifest" href="../manifest.json">
	<meta name="msapplication-TileColor" content="#ffffff">
	<meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
	<meta name="theme-color" content="#ffffff">
</head>
<body>
    <section class="social">
        <ul>
                    <li><a href="../index.html" title="Home"><i class="icon-home"></i></a></li>
            <li><a href="../archive.html" title="Archives"><i class="icon-folder-open-alt"></i></a></li>
            <li><a href="../categories/index.html" title="Tags"><i class="icon-tags"></i></a></li>
            <li><a href="https://linkedin.com/in/davilaio" title="My LinkedIn"><i class="icon-linkedin"></i></a></li>
            <li><a href="https://twitter.com/defionscode" title="My Twitter"><i class="icon-twitter"></i></a></li>
            <li><a href="https://github.com/defionscode" title="My Github"><i class="icon-github"></i></a></li>
            <li><a href="../rss.xml" title="RSS"><i class="icon-rss"></i></a></li>

        </ul>
    </section>
    <section class="page-content">
        <div class="content" rel="main">
    <div class="post">
        <h1 class="p-name entry-title" itemprop="headline name">Red Hat 7 and Docker Hub; the simple fix</h1>

        <div class="meta">
            <div class="authordate">
                <time class="timeago" datetime="2015-04-08T07:17:51-04:00">2015-04-08 07:17</time>
            
                      |  
        <a href="red-hat-7-and-docker-hub-the-simple-fix.md" id="sourcelink">Source</a>

            </div>
                    <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="../categories/docker.html" rel="tag">docker</a></li>
           <li><a class="tag p-category" href="../categories/opensource.html" rel="tag">opensource</a></li>
           <li><a class="tag p-category" href="../categories/redhat.html" rel="tag">redhat</a></li>
           <li><a class="tag p-category" href="../categories/rhel7.html" rel="tag">rhel7</a></li>
        </ul>
        </div>

        </div>
        <div class="body">
            <div>
<p>If you are trying to run Docker on Red Hat 7 you may have found trouble with pulling or pushing your images to Docker Hub, it can error out <!-- TEASER_END -->saying that the repository at registry.access.redhat.com/your/image does not exist; the key word here is <em>may</em>, I've replicated the issue with some RHEL7 boxes while others work as expected...sorta. The solution to this is not at all obvious with very little in the way of Google results to help.</p>
<p>First I found <a href="https://access.redhat.com/articles/881893">this</a>:</p>
<blockquote>
<p>As of December, 2014, the only Docker respository that Red Hat supports is the one at registry.access.redhat.com.</p>
</blockquote>
<p>Uhhh...wut?</p>
<p>After an ungodly amount of time trying to figure out the solution I found the <a href="https://access.redhat.com/articles/1354823">next clue</a>...</p>
<blockquote>
<p>Registry Access Control: The docker daemon includes two options to manage which registries it can connect to. These can be defined in /etc/sysconfig/docker with the ADD_REGISTRY and BLOCK_REGISTRY options.</p>
<p>Each registry in ADD_REGISTRY is searched in order of appearance in the configuration file. Red Hat's default includes
an entry for the Red Hat maintained registry (registry.access.redhat.com) on the Red Hat Customer Portal for images from Red Hat product families.</p>
<p>The default configuration includes access to the Docker Hub as builtin feature of the docker component, To prevent access to the Docker Hub, a special keyword "public", should be used in the BLOCK_REGISTRY option.</p>
</blockquote>
<p>Now that last part would lead you to believe that there is no issue with Docker Hub related actions. This is <em>sometimes</em> true.</p>
<p>The fix that worked for me was to open up <code>/etc/sysconfig/docker</code> and comment out the line <code>ADD_REGISTRY='--add-registry registry.access.redhat.com'</code> at which point I was able to pull and push to Docker Hub again.</p>
<p>Why this would even be a thing, I dunno, but apparently it has plagued many users. I did take to twitter in frustration at the end of the day, you can see the [conversation here][twwet]; even good ol' Solomon Hykes replied with:</p>
<blockquote>
<p>@DefionsCode we're getting many complaints about that... Let's give them the benefit of the doubt while we investigate.</p>
</blockquote>
<p>RedHat has done many great things but this is one of the moments where they really dropped the ball, they are officialy partners with Docker and to me this is a partnership anti-pattern. Hopefully it gets better.</p>
</div>
        </div>
                <ul class="pager">
            <li class="previous">
                <a href="automatically-testing-and-validation-the-ansible-stig-role-for-red-hat-6.html" rel="prev" title="Automatically testing and validating the Ansible STIG Role for Red Hat 6">Previous post</a>
            </li>
        </ul>

                            <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="davilaio",
            disqus_url="http://blog.davila.io/posts/red-hat-7-and-docker-hub-the-simple-fix.html",
        disqus_title="Red Hat 7 and Docker Hub; the simple fix",
        disqus_identifier="cache/posts/red-hat-7-and-docker-hub-the-simple-fix.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="//disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        
    </div>
                    <footer id="footer" role="contentinfo">
            <p>Contents © 2015         <a href="mailto:jonathan@davila.io">Jonathan I. Davila</a> under <a href="../LICENSE"> GPLv2</a></p>
            
        </footer>

        </div>
    </section>
    
    
                <script src="../assets/js/all-nocdn.js" type="text/javascript"></script>
    
<!-- Social buttons -->
<div id="addthisbox" class="addthis_toolbox addthis_peekaboo_style addthis_default_style addthis_label_style addthis_32x32_style">
<a class="addthis_button_more">Share</a>
<ul>
<li>
<a class="addthis_button_facebook"></a>
</li>
<li>
<a class="addthis_button_google_plusone_share"></a>
</li>
<li>
<a class="addthis_button_linkedin"></a>
</li>
<li>
<a class="addthis_button_twitter"></a>
</li>
</ul>
</div>
<script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4f7088a56bb93798"></script>
<!-- End of social buttons -->


        <script type="text/javascript">
            $(function(){
                $('.timeago').timeago();
            });
        </script>
</body>
</html>
